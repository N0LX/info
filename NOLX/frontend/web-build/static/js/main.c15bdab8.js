(()=>{"use strict";var e={2248:(e,t,a)=>{var n=a(2299),o=(a(3049),a(3668)),r=a(6283),l=a(3929),s=a(397);o.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}});var i=a(2631),d=a(9944),c=a(8833),u=a(6665),f=a(484),h=a(8885),g=a(1092),m=a(7514),y=a(5259);function x({navigation:e}){const[t,n]=(0,u.useState)(""),[o,r]=(0,u.useState)(""),[i,d]=(0,u.useState)("");return(0,s.jsxs)(l.default,{style:p.container,children:[(0,s.jsx)(f.default,{source:a(2670),style:p.logo}),(0,s.jsx)(h.default,{variant:"headlineLarge",children:"Login"}),i?(0,s.jsx)(h.default,{style:p.error,children:i}):null,(0,s.jsx)(g.default,{label:"Email",value:t,onChangeText:n,autoCapitalize:"none"}),(0,s.jsx)(g.default,{label:"Password",value:o,onChangeText:r,secureTextEntry:!0}),(0,s.jsx)("br",{}),(0,s.jsx)(m.default,{mode:"contained",onPress:async()=>{try{const a=await fetch("http://localhost:1111/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:o})}),n=await a.json();n.success?(await y.default.setItem("authToken",n.token),e.replace("Home")):d("Invalid Credentials")}catch(i){console.error("Login Error:",i),d("Unable to connect to server. Check your network!")}},children:"Login"}),(0,s.jsxs)(m.default,{onPress:()=>e.navigate("SignUp"),children:["Don't have an account? ",(0,s.jsx)("i",{children:"Sign Up"})]})]})}const p=o.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},logo:{height:130,width:100,marginBottom:20},error:{color:"red",marginBottom:10}});var j=a(2469);function b({navigation:e}){const[t,n]=(0,u.useState)(""),[o,r]=(0,u.useState)(""),[i,d]=(0,u.useState)(""),[c,y]=(0,u.useState)(""),[x,p]=(0,u.useState)(""),[b,C]=(0,u.useState)(""),[v,w]=(0,u.useState)(""),[T,I]=(0,u.useState)(!1),k=e=>{w(e),I(!0)};return(0,s.jsxs)(l.default,{style:S.container,children:[(0,s.jsx)(f.default,{source:a(2670),style:S.logo}),(0,s.jsx)(h.default,{variant:"headlineLarge",children:"Sign Up"}),(0,s.jsx)(g.default,{label:"Name",value:t,onChangeText:n}),(0,s.jsx)(g.default,{label:"Email",value:o,onChangeText:r,keyboardType:"email-address"}),(0,s.jsx)(g.default,{label:"Phone no.",value:i,onChangeText:d,keyboardType:"phone-pad"}),(0,s.jsx)(g.default,{label:"Address",value:c,onChangeText:y}),(0,s.jsx)(g.default,{label:"Password",value:x,onChangeText:p,secureTextEntry:!0}),(0,s.jsx)(g.default,{label:"Re-enter Password",value:b,onChangeText:C,secureTextEntry:!0}),(0,s.jsx)("br",{}),(0,s.jsx)(m.default,{mode:"contained",onPress:async()=>{if(t&&o&&i&&c&&x&&b)if(x===b)try{const a=await fetch("http://localhost:1111/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:o,phone:i,location:c,password:x})}),n=await a.json();if(!a.ok)throw new Error(n.message||"Registration failed.");k("User Registered Successfully!"),setTimeout((()=>e.navigate("Login")),2e3)}catch(a){k(a.message||"Something went wrong."),console.error("Registration Error:",a)}else k("Passwords do not match.");else k("All fields are required.")},children:"Sign Up"}),(0,s.jsxs)(m.default,{onPress:()=>e.navigate("Login"),children:["Already have an account?  ",(0,s.jsx)("i",{children:"Login"})]}),(0,s.jsx)(j.default,{visible:T,onDismiss:()=>I(!1),duration:3e3,children:v})]})}const S=o.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"},logo:{height:130,width:100,marginBottom:20}});var C=a(7687),v=a(932),w=a(2772),T=a(5648),I=a(4132),k=a(1225),P=a(1457),E=a(3947),B=a(7109);function z(){const[e,t]=(0,u.useState)(""),[a,n]=(0,u.useState)(!1),[o,r]=(0,u.useState)(!1),[i,d]=(0,u.useState)(!1),[c,g]=(0,u.useState)([]),[y,x]=(0,u.useState)("asc"),[p,j]=(0,u.useState)([]),[b,S]=(0,u.useState)([]),[C,z]=(0,u.useState)(2),O=(0,E.useNavigation)();(0,u.useEffect)((()=>{B.default.get("http://localhost:1111/product").then((e=>{const t=e.data.data;j(t.slice(0,6)),S(t)})).catch((e=>{console.error("Error fetching product data:",e)}))}),[]);const D=({item:e})=>(0,s.jsx)(T.default,{style:_.cardContainer,onPress:()=>(e=>{O.navigate("item",{item:e})})(e),children:(0,s.jsxs)(I.default,{style:_.card,children:[(0,s.jsx)(f.default,{source:{uri:e.image_url},style:_.itemImage,resizeMode:"cover"}),(0,s.jsxs)(l.default,{style:_.textContainer,children:[(0,s.jsx)(h.default,{style:_.itemName,children:e.product_name}),(0,s.jsxs)(h.default,{style:_.itemPrice,children:["\u20b9",e.price]})]})]})});return(0,s.jsxs)(w.default,{style:_.container,children:[(0,s.jsx)(h.default,{style:_.header,children:"\ud83c\udfe1 Home"}),(0,s.jsx)(k.default,{placeholder:"Search products...",onChangeText:e=>{t(e);const a=[...p,...b].filter((t=>t.product_name.toLowerCase().includes(e.toLowerCase())));"asc"===y?a.sort(((e,t)=>parseFloat(e.price)-parseFloat(t.price))):a.sort(((e,t)=>parseFloat(t.price)-parseFloat(e.price))),g(a),d(""!==e)},value:e,style:_.searchbar}),(0,s.jsx)(l.default,{style:_.filterContainer,children:(0,s.jsx)(m.default,{mode:"contained",onPress:()=>x("asc"===y?"desc":"asc"),children:"asc"===y?"Sort: Low to High":"Sort: High to Low"})}),i&&(0,s.jsxs)(l.default,{style:_.searchResultsContainer,children:[(0,s.jsx)(P.default,{icon:"close",size:20,onPress:()=>{d(!1),t("")},style:_.closeButton}),(0,s.jsx)(v.default,{data:c,renderItem:D,keyExtractor:e=>e.product_id.toString()})]}),(0,s.jsxs)(l.default,{style:_.section,children:[(0,s.jsxs)(l.default,{style:_.sectionHeader,children:[(0,s.jsx)(h.default,{style:_.sectionTitle,children:"\ud83d\udd25 Today's Picks"}),(0,s.jsx)(P.default,{icon:a?"chevron-up":"chevron-down",size:24,onPress:()=>n(!a)})]}),(0,s.jsx)(v.default,{data:p.slice(0,a?p.length:3),renderItem:D,keyExtractor:e=>e.product_id.toString(),horizontal:!a,numColumns:a?2:1},a?"grid":"list")]}),(0,s.jsxs)(l.default,{style:_.section,children:[(0,s.jsxs)(l.default,{style:_.sectionHeader,children:[(0,s.jsx)(h.default,{style:_.sectionTitle,children:"\ud83c\udd95 Recently Added"}),(0,s.jsx)(P.default,{icon:o?"chevron-up":"chevron-down",size:24,onPress:()=>r(!o)})]}),(0,s.jsx)(v.default,{data:b.slice(0,o?b.length:4),renderItem:D,keyExtractor:e=>e.product_id.toString(),horizontal:!o,numColumns:o?2:1},o?"grid":"list")]})]})}const _=o.default.create({container:{flex:1,backgroundColor:"#F8F9FA",padding:12},header:{fontSize:26,fontWeight:"bold",marginBottom:12,color:"#333"},searchbar:{marginBottom:12,borderRadius:8},filterContainer:{alignItems:"center",marginBottom:12},section:{marginBottom:20,backgroundColor:"white",padding:12,borderRadius:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:5},sectionHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},sectionTitle:{fontSize:18,fontWeight:"600",color:"#333"},cardContainer:{flex:1,alignItems:"center",marginBottom:10},card:{width:160,padding:10,borderRadius:10,alignItems:"center",backgroundColor:"#fff",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:5},itemImage:{width:120,height:120,borderRadius:8},textContainer:{alignItems:"center",marginTop:5},itemName:{fontSize:16,fontWeight:"500",color:"#333",textAlign:"center"},itemPrice:{fontSize:14,color:"#28A745",fontWeight:"bold",marginTop:5}});var O=a(2686),D=a(884);function A(){const e=(0,E.useNavigation)(),[t,a]=(0,u.useState)([]),[n,o]=(0,u.useState)(null),[r,i]=(0,u.useState)(!0);(0,u.useEffect)((()=>{(async()=>{try{const e=await y.default.getItem("authToken");if(e){const t=JSON.parse(atob(e.split(".")[1]));o(t.id)}}catch(e){console.error("Error fetching user ID:",e)}})()}),[]),(0,u.useEffect)((()=>{n&&d()}),[n]);const d=async()=>{try{const e=await y.default.getItem("token"),t=await B.default.get(`http://localhost:1111/order/user/${n}`,{headers:{Authorization:`Bearer ${e}`}});a(t.data)}catch(e){console.error("Error fetching orders:",e)}finally{i(!1)}};return(0,s.jsxs)(l.default,{style:F.container,children:[(0,s.jsx)(h.default,{style:F.title,children:"\ud83d\udce6 My Orders"}),r?(0,s.jsx)(O.default,{animating:!0,size:"large",style:F.loader}):0===t.length?(0,s.jsxs)(l.default,{style:F.noOrdersContainer,children:[(0,s.jsx)(D.default,{name:"package-variant-closed",size:80,color:"#888"}),(0,s.jsx)(h.default,{style:F.noOrdersText,children:"Nothing to see here!"}),(0,s.jsx)(h.default,{style:F.subText,children:"You haven\u2019t placed any orders yet."})]}):(0,s.jsx)(v.default,{data:t,keyExtractor:e=>e.order_id.toString(),renderItem:({item:t})=>(0,s.jsxs)(I.default,{style:F.card,children:[(0,s.jsxs)(I.default.Content,{children:[(0,s.jsxs)(h.default,{style:F.orderId,children:["Order ID: ",t.order_id]}),(0,s.jsxs)(h.default,{style:F.orderDate,children:["\ud83d\udcc5 ",t.order_date]}),(0,s.jsxs)(h.default,{style:F.orderStatus,children:["\ud83d\udfe2 Status: ",t.order_status]}),(0,s.jsxs)(h.default,{style:F.items,children:["\ud83d\uded2 Items: ",t.items.map((e=>`${e.product_name} (x${e.quantity})`)).join(", ")]})]}),(0,s.jsx)(I.default.Actions,{children:(0,s.jsx)(m.default,{mode:"contained",onPress:()=>e.navigate("Odetail",{order_id:t.order_id}),children:"View Details"})})]})})]})}const F=o.default.create({container:{flex:1,backgroundColor:"#F8F8F8",padding:10},title:{fontSize:22,fontWeight:"bold",marginBottom:15,textAlign:"center",color:"#333"},loader:{marginTop:50},card:{marginVertical:8,borderRadius:10,elevation:3,backgroundColor:"#fff"},orderId:{fontSize:18,fontWeight:"bold",color:"#333"},orderDate:{fontSize:16,color:"#555",marginTop:4},orderStatus:{fontSize:16,fontWeight:"bold",marginTop:6},items:{fontSize:14,color:"#666",marginTop:6},noOrdersContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},noOrdersText:{fontSize:20,fontWeight:"bold",color:"#555",marginTop:10},subText:{fontSize:16,color:"#777",marginTop:5,textAlign:"center"}});var R=a(8264);const N=(0,u.createContext)(),W=({children:e})=>{const[t,a]=(0,u.useState)([]);return(0,s.jsx)(N.Provider,{value:{cartItems:t,addToCart:e=>{a((t=>t.find((t=>t.product_name===e.product_name))?t.map((t=>t.product_name===e.product_name?Object.assign({},t,{quantity:t.quantity+1}):t)):[...t,Object.assign({},e,{quantity:1})]))},updateCart:(e,t)=>{a((a=>a.map((a=>a.product_name===e.product_name?Object.assign({},a,{quantity:t}):a))))},removeFromCart:e=>{a((t=>t.filter((t=>t.id!==e.id))))}},children:e})},q=()=>(0,u.useContext)(N);function L(){const e=(0,E.useNavigation)(),{cartItems:t,updateCart:a,removeFromCart:n}=q(),[o,i]=(0,u.useState)(!1),d=t.reduce(((e,t)=>e+t.quantity),0),c=t.reduce(((e,t)=>e+t.price*t.quantity),0);return(0,s.jsxs)(l.default,{style:$.container,children:[(0,s.jsx)(r.default,{style:$.title,children:"My Cart"}),(0,s.jsx)(l.default,{style:$.line})," ",0===t.length?(0,s.jsxs)(l.default,{style:$.emptyContainer,children:[(0,s.jsx)(D.default,{name:"package-variant",size:60,color:"#aaa"}),(0,s.jsx)(r.default,{style:$.emptyText,children:"No items are present"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.default,{style:$.listContainer,children:(0,s.jsx)(v.default,{data:t,keyExtractor:(e,t)=>t.toString(),renderItem:({item:e})=>(0,s.jsxs)(l.default,{style:$.cartItem,children:[(0,s.jsxs)(l.default,{style:$.itemDetails,children:[(0,s.jsx)(r.default,{style:$.itemName,children:e.product_name}),(0,s.jsxs)(r.default,{style:$.itemCategory,children:["Category: ",e.category]}),(0,s.jsxs)(r.default,{style:$.itemPrice,children:["\u20b9",e.price]})]}),(0,s.jsxs)(l.default,{style:$.quantityContainer,children:[(0,s.jsx)(T.default,{onPress:()=>(e=>{e.quantity>1?a(e,e.quantity-1):n(e)})(e),style:$.button,children:(0,s.jsx)(r.default,{style:$.buttonText,children:"\u2796"})}),(0,s.jsx)(r.default,{style:$.quantityText,children:e.quantity}),(0,s.jsx)(T.default,{onPress:()=>(e=>{a(e,e.quantity+1)})(e),style:$.button,children:(0,s.jsx)(r.default,{style:$.buttonText,children:"\u2795"})})]})]}),ListFooterComponent:(0,s.jsx)(l.default,{style:{height:200}})})}),(0,s.jsxs)(l.default,{style:$.bottomContainer,children:[(0,s.jsxs)(r.default,{style:$.summaryText,children:["Total Items: ",d]}),(0,s.jsxs)(r.default,{style:$.summaryText,children:["Total Price: \u20b9",c]}),(0,s.jsx)(m.default,{mode:"contained",onPress:()=>{i(!0)},style:$.purchaseButton,children:"Purchase"})]})]}),(0,s.jsx)(R.default,{transparent:!0,visible:o,animationType:"slide",children:(0,s.jsx)(l.default,{style:$.modalContainer,children:(0,s.jsxs)(l.default,{style:$.modalContent,children:[(0,s.jsx)(r.default,{style:$.modalText,children:"Do you want to proceed with the purchase?"}),(0,s.jsxs)(l.default,{style:$.modalButtons,children:[(0,s.jsx)(m.default,{mode:"contained",onPress:()=>{i(!1),e.navigate("POrderDetails",{cartItems:t,totalPrice:c})},children:"Yes"}),(0,s.jsx)(m.default,{mode:"outlined",onPress:()=>i(!1),children:"No"})]})]})})})]})}const $=o.default.create({container:{flex:1,backgroundColor:"#fff",padding:10},title:{fontSize:24,fontWeight:"bold",marginBottom:10,textAlign:"center"},line:{borderBottomWidth:2,borderBottomColor:"#ddd",marginBottom:10},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center"},emptyText:{fontSize:18,color:"#666",marginTop:10},cartItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9",padding:15,borderRadius:10,marginVertical:5,elevation:3},itemDetails:{flex:1},itemName:{fontSize:18,fontWeight:"bold"},itemCategory:{fontSize:14,color:"#666"},itemPrice:{fontSize:16,color:"green",fontWeight:"bold"},quantityContainer:{flexDirection:"row",alignItems:"center"},button:{backgroundColor:"#ddd",padding:5,borderRadius:5,marginHorizontal:5},buttonText:{fontSize:18,fontWeight:"bold"},quantityText:{fontSize:16,fontWeight:"bold",minWidth:30,textAlign:"center"},bottomContainer:{backgroundColor:"#fff",padding:15,borderTopWidth:1,borderTopColor:"#ddd",position:"absolute",bottom:20,left:0,right:0,elevation:10,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},summaryText:{fontSize:16,fontWeight:"bold"},purchaseButton:{backgroundColor:"green",padding:5},listContainer:{flex:1},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,width:"80%",alignItems:"center"},modalText:{fontSize:18,marginBottom:20}});var M=a(530),U=a(9793),V=a(3880),J=a(4636);const H="http://localhost:1111";function G(){const e=(0,E.useNavigation)(),[t,a]=(0,u.useState)(null),[n,o]=(0,u.useState)(null),[r,i]=(0,u.useState)(!1),[d,c]=(0,u.useState)(""),[f,x]=(0,u.useState)(!1),[p,j]=(0,u.useState)({});(0,u.useEffect)((()=>{(async()=>{try{const e=await y.default.getItem("authToken");if(e){const t=JSON.parse(V.Buffer.from(e.split(".")[1],"base64").toString());o(t.id)}}catch(e){console.error("Error decoding user ID:",e)}})()}),[]),(0,u.useEffect)((()=>{(async()=>{if(n)try{const e=await y.default.getItem("authToken"),t=await B.default.get(`${H}/user/${n}`,{headers:{Authorization:`Bearer ${e}`}});t.data?.data&&(a(t.data.data),j(t.data.data))}catch(e){console.error("Error fetching user details:",e.message)}})()}),[n]);return t?(0,s.jsxs)(l.default,{style:Y.container,children:[(0,s.jsxs)(h.default,{style:Y.title,children:[(0,s.jsx)(J.default,{name:"account-circle",size:30,color:"#6A0DAD"})," My Account"]}),(0,s.jsx)(I.default,{style:Y.card,children:(0,s.jsxs)(I.default.Content,{children:[(0,s.jsx)(h.default,{style:Y.userName,children:t.name}),(0,s.jsx)(U.default,{style:Y.divider}),(0,s.jsxs)(h.default,{style:Y.detail,children:[(0,s.jsx)(J.default,{name:"email",size:18,color:"#6200EE"})," ",t.email]}),(0,s.jsxs)(h.default,{style:Y.detail,children:[(0,s.jsx)(J.default,{name:"phone",size:18,color:"#6200EE"})," ",t.phone]}),(0,s.jsxs)(h.default,{style:Y.detail,children:[(0,s.jsx)(J.default,{name:"map-marker",size:18,color:"#6200EE"})," ",t.location]})]})}),(0,s.jsxs)(m.default,{mode:"contained",onPress:()=>e.navigate("wishlist"),style:Y.button,children:[(0,s.jsx)(J.default,{name:"heart",size:20})," Wishlist"]}),(0,s.jsxs)(m.default,{mode:"contained",onPress:()=>i(!0),style:Y.editButton,children:[(0,s.jsx)(J.default,{name:"pencil",size:20})," Edit Details"]}),(0,s.jsx)("br",{}),(0,s.jsxs)(m.default,{mode:"contained",onPress:async()=>{try{await y.default.removeItem("authToken"),alert("Logged out successfully!"),e.replace("Login")}catch(t){console.error("Error logging out:",t),alert("Failed to logout. Please try again.")}},style:Y.logoutButton,children:[(0,s.jsx)(J.default,{name:"logout",size:20})," Logout"]}),(0,s.jsx)(R.default,{animationType:"slide",transparent:!0,visible:r,children:(0,s.jsx)(l.default,{style:Y.modalContainer,children:(0,s.jsxs)(l.default,{style:Y.modalContent,children:[f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.default,{style:Y.modalTitle,children:"Edit Details"}),(0,s.jsx)(g.default,{label:"Name",value:p.name,onChangeText:e=>j(Object.assign({},p,{name:e})),style:Y.input}),(0,s.jsx)(g.default,{label:"Email",value:p.email,onChangeText:e=>j(Object.assign({},p,{email:e})),style:Y.input}),(0,s.jsx)(g.default,{label:"Phone",value:p.phone,onChangeText:e=>j(Object.assign({},p,{phone:e})),style:Y.input}),(0,s.jsx)(g.default,{label:"Location",value:p.location,onChangeText:e=>j(Object.assign({},p,{location:e})),style:Y.input}),(0,s.jsx)(m.default,{mode:"contained",onPress:async()=>{try{const e=await y.default.getItem("authToken"),t={name:p.name,email:p.email,phone:p.phone,location:p.location};"success"===(await B.default.put(`${H}/user/${n}`,t,{headers:{Authorization:`Bearer ${e}`}})).data.status?(alert("User details updated successfully!"),a(p),i(!1)):alert("Failed to update user details!")}catch(e){console.error("Error updating user details:",e.message),alert("Error updating user details!")}},style:Y.saveButton,children:"Save"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.default,{style:Y.modalTitle,children:"Enter Password to Edit"}),(0,s.jsx)(g.default,{label:"Password",secureTextEntry:!0,value:d,onChangeText:c,style:Y.input}),(0,s.jsx)(m.default,{mode:"contained",onPress:async()=>{try{const e=await y.default.getItem("authToken");(await B.default.post(`${H}/user/verify-password`,{userId:n,password:d},{headers:{Authorization:`Bearer ${e}`}})).data.success?x(!0):alert("Incorrect password!")}catch(e){console.error("Error verifying password:",e.message),alert("Error verifying password.")}},children:"Verify"})]}),(0,s.jsx)(m.default,{mode:"outlined",onPress:()=>i(!1),style:Y.cancelButton,children:"Cancel"})]})})})]}):(0,s.jsxs)(l.default,{style:Y.loadingContainer,children:[(0,s.jsx)(M.default,{size:"large",color:"#6A0DAD"}),(0,s.jsx)(h.default,{children:"Loading user details..."})]})}const Y=o.default.create({container:{flex:1,padding:20,backgroundColor:"#EDE7F6"},title:{fontSize:26,fontWeight:"bold",textAlign:"center",marginBottom:20},card:{padding:20,borderRadius:10,backgroundColor:"#FFF",elevation:4,marginBottom:20},userName:{fontSize:22,fontWeight:"bold"},detail:{fontSize:18,marginVertical:5},button:{marginVertical:10,backgroundColor:"#6A0DAD"},editButton:{backgroundColor:"#4A148C"},logoutButton:{backgroundColor:"#D50000"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{width:"80%",padding:20,backgroundColor:"#FFF",borderRadius:10}});var Q=a(377);function K({navigation:e}){const[t,a]=(0,u.useState)(!1),[n,o]=(0,u.useState)(!1);return(0,s.jsxs)(l.default,{style:X.container,children:[(0,s.jsx)(h.default,{style:X.title,children:"\ud83d\udce2 Seller Guidelines"}),(0,s.jsxs)(l.default,{style:X.guidelines,children:[(0,s.jsx)(h.default,{style:X.guidelineItem,children:"\u2705 Provide clear product images."}),(0,s.jsx)(h.default,{style:X.guidelineItem,children:"\u2705 Ensure accurate descriptions."}),(0,s.jsx)(h.default,{style:X.guidelineItem,children:"\u2705 Mention correct price and details."}),(0,s.jsx)(h.default,{style:X.guidelineItem,children:"\u2705 Avoid prohibited items."}),(0,s.jsx)(h.default,{style:X.guidelineItem,children:"\u2705 Respect buyer privacy and policies."})]}),(0,s.jsxs)(l.default,{style:X.checkboxContainer,children:[(0,s.jsx)(Q.default,{status:n?"checked":"unchecked",onPress:()=>o(!n),color:"#007BFF"}),(0,s.jsx)(h.default,{style:X.checkboxText,children:"I have read and agree to the guidelines."})]}),(0,s.jsx)(m.default,{mode:"contained",style:X.button,onPress:()=>a(!0),disabled:!n,children:"Add Product"}),(0,s.jsx)(R.default,{animationType:"slide",transparent:!0,visible:t,onRequestClose:()=>a(!1),children:(0,s.jsx)(l.default,{style:X.modalContainer,children:(0,s.jsxs)(l.default,{style:X.modalContent,children:[(0,s.jsx)(h.default,{style:X.text,children:"\ud83d\uded1 Permission Required"}),(0,s.jsx)(h.default,{style:X.modalText,children:"Do you agree to follow the selling guidelines?"}),(0,s.jsxs)(l.default,{style:X.buttonContainer,children:[(0,s.jsx)(m.default,{onPress:()=>a(!1),mode:"outlined",style:X.modalButton,children:"Disagree"}),(0,s.jsx)(m.default,{onPress:()=>{console.log("Navigating to Seller Dashboard"),e.navigate("Selldashb"),a(!1)},mode:"contained",style:X.modalButton,children:"Agree"})]})]})})})]})}const X=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#F8F8F8",padding:20},title:{fontSize:22,fontWeight:"bold",marginBottom:15,textAlign:"center",color:"#333"},guidelines:{backgroundColor:"#FFF",padding:15,borderRadius:10,width:"100%",marginBottom:20,elevation:3},guidelineItem:{fontSize:16,color:"#555",marginVertical:5},checkboxContainer:{flexDirection:"row",alignItems:"center",marginBottom:20},checkboxText:{fontSize:16,color:"#444"},button:{backgroundColor:"#007BFF",width:"90%"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,width:300,alignItems:"center",elevation:5},text:{fontSize:20,fontWeight:"bold",marginBottom:10,color:"#333"},modalText:{fontSize:16,textAlign:"center",color:"#666",marginBottom:20},buttonContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%"},modalButton:{width:"45%"}});function Z({navigation:e}){const[t,a]=u.useState(0),[n]=u.useState([{key:"dashboard",title:"Dashboard",focusedIcon:"view-dashboard"},{key:"myorders",title:"My Orders",focusedIcon:"shopping"},{key:"mycart",title:"Cart",focusedIcon:"heart"},{key:"account",title:"Account",focusedIcon:"account"},{key:"seller",title:"Seller",focusedIcon:"store"}]);return(0,s.jsx)(C.default,{navigationState:{index:t,routes:n},onIndexChange:a,renderScene:({route:t})=>{switch(t.key){case"dashboard":return(0,s.jsx)(z,{});case"myorders":return(0,s.jsx)(A,{});case"mycart":return(0,s.jsx)(L,{});case"account":return(0,s.jsx)(G,{});case"seller":return(0,s.jsx)(K,{navigation:e});default:return null}}})}var ee=a(2269),te=a(874),ae=a(9050);function ne({navigation:e}){const[t,a]=(0,u.useState)(""),[n,o]=(0,u.useState)(""),[r,i]=(0,u.useState)(""),[d,c]=(0,u.useState)(""),[x,p]=(0,u.useState)(""),[j,b]=(0,u.useState)(""),[S,C]=(0,u.useState)([]),[v,T]=(0,u.useState)(null),[I,k]=(0,u.useState)(!1),[P,E]=(0,u.useState)(""),[B,z]=(0,u.useState)("");(0,u.useEffect)((()=>{(async()=>{try{const e=await y.default.getItem("authToken");if(e){const t=JSON.parse(atob(e.split(".")[1]));console.log("Decoded Token:",t),T(t.id)}}catch(e){console.error("\ud83d\udea8 Error fetching user ID:",e),_("Failed to get user details.")}})()}),[]),(0,u.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:1111/category/all"),t=await e.json();if(console.log("Categories fetched:",t),"success"===t.status&&Array.isArray(t.data)){const e=t.data.map((e=>({label:e.category_name||"Unknown",value:e.category_id||1})));C(e)}}catch(e){console.error("Error fetching categories:",e)}})()}),[]);const _=e=>{E(e),k(!0)};return(0,s.jsx)(w.default,{contentContainerStyle:oe.scrollContainer,children:(0,s.jsxs)(l.default,{style:oe.container,children:[(0,s.jsx)(h.default,{style:oe.title,children:"\ud83d\udecd Add Product"}),(0,s.jsx)(m.default,{mode:"contained",style:oe.imageButton,onPress:async()=>{const{status:e}=await te.requestMediaLibraryPermissionsAsync();if("granted"!==e)return void _("Permission denied to access media library.");let t=await te.launchImageLibraryAsync({mediaTypes:ae.MediaTypeOptions.Images,allowsEditing:!0,aspect:[4,3],quality:1});if(console.log("ImagePicker Result:",t),!t.canceled&&t.assets?.length>0){const e=t.assets[0];console.log("Selected Image URI:",e.uri),z(e.uri);try{const t=await fetch("http://localhost:1111/upload/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({photoUri:e.uri})}),a=await t.json();console.log("Upload Response:",a),a.imageUrl?b(a.imageUrl):_("Failed to upload image.")}catch(a){console.error("Error sending image URI:",a),_("Error uploading image.")}}},children:"Choose Image"}),(0,s.jsx)(l.default,{style:oe.imageContainer,children:B?(0,s.jsx)(f.default,{source:{uri:B},style:oe.previewImage,resizeMode:"cover"}):(0,s.jsx)(h.default,{style:oe.imagePlaceholder,children:"No Image Selected"})}),(0,s.jsx)(g.default,{label:"Product Name",value:t,onChangeText:a,style:oe.input}),(0,s.jsx)(ee.Dropdown,{style:oe.dropdown,data:S,labelField:"label",valueField:"value",placeholder:"Select Category",value:n,onChange:e=>o(e.value)}),(0,s.jsx)(g.default,{label:"Description",value:r,onChangeText:i,style:oe.input}),(0,s.jsx)(g.default,{label:"Stock",value:d,onChangeText:c,keyboardType:"numeric",style:oe.input}),(0,s.jsx)(g.default,{label:"Price",value:x,onChangeText:p,keyboardType:"numeric",style:oe.input}),(0,s.jsx)(m.default,{mode:"contained",onPress:async()=>{const l=await y.default.getItem("authToken");try{const s={product_name:t,seller_id:v,category_id:parseInt(n),description:r,stock:parseInt(d),price:parseFloat(x),image_url:j},u=await fetch("http://localhost:1111/product/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(s)}),f=await u.json();console.log("Response from server:",f),"success"===f.status?(_("Product added successfully!"),a(""),o(""),i(""),c(""),p(""),b(""),e.navigate("SellDashboard")):_(f.message||"Failed to add the product.")}catch(s){console.error("Error adding product:",s),_("Failed to add the product.")}},style:oe.submitButton,children:"Submit"}),(0,s.jsx)(R.default,{animationType:"slide",transparent:!0,visible:I,onRequestClose:()=>k(!1),children:(0,s.jsx)(l.default,{style:oe.modalBackground,children:(0,s.jsxs)(l.default,{style:oe.modalContainer,children:[(0,s.jsx)(h.default,{children:P}),(0,s.jsx)(m.default,{mode:"text",onPress:()=>k(!1),children:"Close"})]})})})]})})}const oe=o.default.create({scrollContainer:{flexGrow:1},container:{flex:1,padding:20},title:{fontSize:20,fontWeight:"bold",marginBottom:20},imageContainer:{width:200,height:200,borderWidth:2,borderColor:"#ccc",justifyContent:"center",alignItems:"center",backgroundColor:"#f8f8f8",marginVertical:10},previewImage:{width:"100%",height:"100%"},imagePlaceholder:{color:"#999",fontSize:14},dropdown:{marginVertical:10,height:50,borderWidth:1,padding:10},modalBackground:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContainer:{width:300,padding:20,backgroundColor:"white",borderRadius:10,alignItems:"center"}});var re=a(2660);function le({navigation:e}){const[t,a]=(0,u.useState)([]),[n,o]=(0,u.useState)(null),[r,i]=(0,u.useState)(!1);(0,u.useEffect)((()=>{(async()=>{try{const e=await y.default.getItem("authToken");if(e){const t=JSON.parse(atob(e.split(".")[1]));console.log("Decoded Token:",t),o(t.id)}}catch(e){console.error("\ud83d\udea8 Error fetching user ID:",e)}})()}),[]),(0,u.useEffect)((()=>{n&&d()}),[n]);const d=async()=>{try{i(!0);const e=await B.default.get("http://localhost:1111/product/"),t=e.data.data.filter((e=>e.seller_id==n));a(t)}catch(e){console.error("Error fetching seller products:",e)}finally{i(!1)}};return(0,s.jsxs)(l.default,{style:se.container,children:[(0,s.jsx)(h.default,{style:se.header,children:"\ud83d\udecd\ufe0f Your Listings"}),0===t.length?(0,s.jsxs)(l.default,{style:se.emptyContainer,children:[(0,s.jsx)(D.default,{name:"cart-plus",size:80,color:"#888"}),(0,s.jsx)(h.default,{style:se.emptyText,children:"Time to add new items!"}),(0,s.jsx)(h.default,{style:se.subText,children:"Start selling by listing your first product."}),(0,s.jsx)(h.default,{style:se.emptyText,children:"Go to add Item button below"})]}):(0,s.jsx)(v.default,{data:t,renderItem:({item:e})=>(0,s.jsxs)(T.default,{style:se.itemBox,children:[(0,s.jsx)(f.default,{source:{uri:e.image_url},style:se.itemImage}),(0,s.jsx)(h.default,{style:se.itemName,children:e.product_name}),(0,s.jsxs)(h.default,{style:se.itemPrice,children:["\ud83d\udcb2",e.price]})]}),keyExtractor:e=>e.product_id.toString(),numColumns:2,refreshControl:(0,s.jsx)(re.default,{refreshing:r,onRefresh:d})}),(0,s.jsx)(m.default,{mode:"contained",onPress:()=>e.navigate("Home"),style:se.backButton,children:"Back"})]})}const se=o.default.create({container:{flex:1,backgroundColor:"#F8F8F8",padding:10},header:{fontSize:22,fontWeight:"bold",marginBottom:15,textAlign:"center",color:"#333"},itemBox:{backgroundColor:"#FFF",padding:15,margin:8,width:160,height:200,justifyContent:"center",alignItems:"center",borderRadius:10,elevation:3},itemImage:{width:120,height:120,borderRadius:10,marginBottom:8},itemName:{fontSize:16,fontWeight:"bold",color:"#333"},itemPrice:{fontSize:14,fontWeight:"bold",color:"#008000",marginTop:5},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},emptyText:{fontSize:22,fontWeight:"bold",color:"#555",marginTop:10},subText:{fontSize:16,color:"#777",marginTop:5,textAlign:"center"},addButton:{marginTop:15,backgroundColor:"#007BFF"},backButton:{marginTop:15,alignSelf:"center",backgroundColor:"#555"}});function ie({navigation:e}){const[t,a]=(0,u.useState)(0),[n]=(0,u.useState)([{key:"selld",title:"Dashboard",focusedIcon:"view-dashboard-outline"},{key:"additem",title:"Add Item",focusedIcon:"plus-box-outline"}]),o=C.default.SceneMap({selld:()=>(0,s.jsx)(le,{navigation:e}),additem:()=>(0,s.jsx)(ne,{navigation:e})});return(0,s.jsx)(C.default,{navigationState:{index:t,routes:n},onIndexChange:a,renderScene:o})}function de(e){const[t,a]=(0,u.useState)(""),[n,o]=(0,u.useState)([]),[r,i]=(0,u.useState)([]),d=(0,E.useNavigation)(),[c,g]=(0,u.useState)(null);(0,u.useEffect)((()=>{(async()=>{try{const e=await y.default.getItem("authToken");if(e){const t=JSON.parse(atob(e.split(".")[1]));console.log("Decoded Token:",t),g(t.id)}}catch(e){console.error("\ud83d\udea8 Error fetching user ID:",e)}})()}),[]);(0,u.useEffect)((()=>{if(t){const e=n.filter((e=>e.product_name.toLowerCase().includes(t.toLowerCase())));i(e)}else i(n)}),[t,n]),(0,u.useEffect)((()=>{c&&(async()=>{try{const e=await fetch(`http://localhost:1111/wish/list/${c}`),t=await e.json();"success"===t.status?(o(t.data),i(t.data)):console.error(t.message)}catch(e){console.error("Error fetching wishlist details:",e)}})()}),[c]);return(0,s.jsxs)(l.default,{style:ce.container,children:[(0,s.jsx)(h.default,{style:ce.title,children:"My Wishlist"}),(0,s.jsx)(k.default,{placeholder:"Search for products",onChangeText:a,value:t,style:ce.searchBar}),(0,s.jsx)(v.default,{data:r,renderItem:({item:e})=>(0,s.jsx)(I.default,{style:ce.card,children:(0,s.jsxs)(l.default,{style:ce.cardContent,children:[(0,s.jsx)(f.default,{source:{uri:e.image_url},style:ce.productImage}),(0,s.jsxs)(l.default,{style:ce.productDetails,children:[(0,s.jsx)(h.default,{style:ce.productName,children:e.product_name}),(0,s.jsxs)(h.default,{style:ce.productPrice,children:["\u20b9",e.price]})]}),(0,s.jsx)(P.default,{icon:"heart-off",size:24,onPress:()=>(async e=>{try{const t=await fetch("http://localhost:1111/wish/remove",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:c,product_id:e})}),a=await t.json();"success"===a.status?(o((t=>t.filter((t=>t.product_id!==e)))),i((t=>t.filter((t=>t.product_id!==e))))):console.error(a.error)}catch(t){console.error("Error removing item from wishlist:",t)}})(e.product_id),style:ce.removeButton})]})}),keyExtractor:e=>e.product_id.toString(),contentContainerStyle:ce.list}),(0,s.jsx)(m.default,{mode:"contained",onPress:()=>{d.goBack()},style:ce.backButton,children:"Back"})]})}const ce=o.default.create({container:{flex:1,backgroundColor:"#F2F2F2",padding:15},title:{fontSize:24,fontWeight:"bold",marginBottom:15,textAlign:"center",color:"#333"},searchBar:{marginBottom:10,borderRadius:8},list:{flexGrow:1},card:{marginBottom:10,borderRadius:10,elevation:3,backgroundColor:"#fff",padding:10},cardContent:{flexDirection:"row",alignItems:"center"},productImage:{width:80,height:80,borderRadius:8,marginRight:15},productDetails:{flex:1,justifyContent:"center"},productName:{fontSize:18,fontWeight:"bold",color:"#333"},productPrice:{fontSize:16,color:"#777",marginTop:4},removeButton:{backgroundColor:"#ff4d4d",borderRadius:8},backButton:{marginTop:15}});function ue(){const e=(0,E.useNavigation)(),t=(0,E.useRoute)(),{order_id:a}=t.params,[n,o]=(0,u.useState)(null),[r,i]=(0,u.useState)(!0);return(0,u.useEffect)((()=>{fetch(`http://localhost:1111/order/get/${a}`).then((e=>e.json())).then((e=>{o(e),i(!1)})).catch((e=>{console.error("Error fetching order details:",e),i(!1)}))}),[a]),r?(0,s.jsx)(O.default,{animating:!0,size:"large",style:fe.loader}):n?(0,s.jsxs)(w.default,{contentContainerStyle:fe.container,children:[(0,s.jsxs)(I.default,{style:fe.card,children:[(0,s.jsx)(I.default.Title,{title:"Order Details",titleStyle:fe.header}),(0,s.jsxs)(I.default.Content,{children:[(0,s.jsxs)(h.default,{style:fe.label,children:["Order ID: ",(0,s.jsx)(h.default,{style:fe.value,children:n.order_id})]}),(0,s.jsxs)(h.default,{style:fe.label,children:["Date: ",(0,s.jsx)(h.default,{style:fe.value,children:n.order_date})]}),(0,s.jsxs)(h.default,{style:fe.label,children:["Status: ",(0,s.jsx)(h.default,{style:[fe.value,fe.status],children:n.order_status})]}),(0,s.jsx)(h.default,{style:fe.label,children:"Shipping Address:"}),(0,s.jsx)(h.default,{style:fe.value,children:n.shipping_address}),(0,s.jsx)(U.default,{style:fe.divider}),(0,s.jsxs)(h.default,{style:fe.label,children:["Total Price: ",(0,s.jsxs)(h.default,{style:fe.price,children:["\u20b9",n.total_price]})]})]})]}),(0,s.jsx)(h.default,{style:fe.subHeader,children:"Ordered Items"}),n.items.map(((e,t)=>(0,s.jsx)(I.default,{style:fe.itemCard,children:(0,s.jsxs)(I.default.Content,{children:[(0,s.jsxs)(h.default,{style:fe.label,children:["Product: ",(0,s.jsx)(h.default,{style:fe.value,children:e.product_name})]}),(0,s.jsxs)(h.default,{style:fe.label,children:["Quantity: ",(0,s.jsx)(h.default,{style:fe.value,children:e.quantity})]}),(0,s.jsxs)(h.default,{style:fe.label,children:["Price: ",(0,s.jsxs)(h.default,{style:fe.price,children:["\u20b9",e.price]})]})]})},t))),(0,s.jsx)(m.default,{mode:"contained",onPress:()=>e.goBack(),style:fe.button,children:"Back"})]}):(0,s.jsxs)(l.default,{style:fe.container,children:[(0,s.jsx)(h.default,{style:fe.errorText,children:"Order not found"}),(0,s.jsx)(m.default,{mode:"contained",onPress:()=>e.goBack(),style:fe.button,children:"Back"})]})}const fe=o.default.create({container:{flexGrow:1,padding:20,backgroundColor:"#f8f9fa",alignItems:"center"},loader:{flex:1,justifyContent:"center",alignItems:"center"},card:{width:"100%",borderRadius:12,elevation:4,backgroundColor:"#ffffff",paddingBottom:10},header:{fontSize:22,fontWeight:"bold",textAlign:"center"},subHeader:{fontSize:20,fontWeight:"bold",marginVertical:15,textAlign:"center"},label:{fontSize:16,fontWeight:"bold",color:"#333",marginVertical:2},value:{fontSize:16,fontWeight:"normal",color:"#555"},status:{fontWeight:"bold",color:"#e67e22"},price:{fontSize:18,fontWeight:"bold",color:"#27ae60"},divider:{marginVertical:10},itemCard:{width:"100%",borderRadius:10,backgroundColor:"#fff",elevation:3,marginBottom:10,padding:10},button:{marginTop:20,width:"90%",borderRadius:8},errorText:{color:"red",fontSize:18,textAlign:"center",marginBottom:10}});var he=a(6773),ge=a(1690);function me({route:e}){const{cartItems:t=[],totalPrice:a=0}=e.params||{},n=(0,E.useNavigation)(),[o,i]=(0,u.useState)(""),[d,c]=(0,u.useState)(!1),[f,h]=(0,u.useState)(""),[g,x]=(0,u.useState)(""),[p,j]=(0,u.useState)(!1),[b,S]=(0,u.useState)(!1),[C,v]=(0,u.useState)(null),[w,T]=(0,u.useState)(null);(0,u.useEffect)((()=>{(async()=>{try{const e=await y.default.getItem("authToken");if(e){const t=JSON.parse(atob(e.split(".")[1]));T(t.id)}}catch(e){console.error("\ud83d\udea8 Error fetching user ID:",e),ge.default.alert("Error","Failed to get user details.")}})()}),[]),(0,u.useEffect)((()=>{console.log("id="+w)}),[w]);const I=e=>{h(e),c(!1),"Cash"===e?k(e,null):j(!0)},k=async(e,t)=>{const n={method:e,amount:a,upi_id:"UPI"===e?t:null,card_id:"Card"===e?t:null};console.log("Sending Payment Data:",n);try{let e=await fetch("http://localhost:1111/payment/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await e.json();console.log("Server Response:",t),t.success?(v(t.transaction_id),S(!0)):ge.default.alert("Payment Failed",t.message||"Please try again.")}catch(o){console.error("API Error:",o),ge.default.alert("Server Error","Could not process payment.")}};return(0,s.jsxs)(l.default,{style:ye.container,children:[(0,s.jsx)(r.default,{style:ye.title,children:"Order Details"}),t.length>0?t.map(((e,t)=>(0,s.jsxs)(r.default,{style:ye.item,children:[e.product_name," - \u20b9",e.price," x ",e.quantity]},t))):(0,s.jsx)(r.default,{style:ye.emptyCart,children:"Your cart is empty."}),(0,s.jsxs)(r.default,{style:ye.total,children:["Total Price: \u20b9",a]}),(0,s.jsx)(he.default,{placeholder:"Enter Shipping Address",value:o,onChangeText:i,style:ye.input}),(0,s.jsx)(m.default,{mode:"contained",onPress:()=>{o.trim()?c(!0):ge.default.alert("Error","Please enter a valid shipping address.")},style:ye.button,children:"Proceed to Payment"}),(0,s.jsx)(R.default,{transparent:!0,visible:d,animationType:"slide",children:(0,s.jsx)(l.default,{style:ye.modalContainer,children:(0,s.jsxs)(l.default,{style:ye.modalContent,children:[(0,s.jsx)(r.default,{style:ye.modalText,children:"Select Payment Method"}),(0,s.jsx)(m.default,{onPress:()=>I("UPI"),children:"UPI"}),(0,s.jsx)(m.default,{onPress:()=>I("Card"),children:"Card"}),(0,s.jsx)(m.default,{onPress:()=>I("Cash"),children:"Cash"}),(0,s.jsx)(m.default,{onPress:()=>c(!1),children:"Cancel"})]})})}),(0,s.jsx)(R.default,{transparent:!0,visible:p,animationType:"slide",children:(0,s.jsx)(l.default,{style:ye.modalContainer,children:(0,s.jsxs)(l.default,{style:ye.modalContent,children:[(0,s.jsxs)(r.default,{style:ye.modalText,children:["Enter ",f," ID"]}),(0,s.jsx)(he.default,{style:ye.input,placeholder:`Enter your ${f} ID`,value:g,onChangeText:x}),(0,s.jsx)(m.default,{mode:"contained",onPress:()=>{g.trim()?(j(!1),k(f,g)):ge.default.alert("Error",`Please enter a valid ${f} ID`)},children:"Submit"}),(0,s.jsx)(m.default,{onPress:()=>j(!1),children:"Cancel"})]})})}),(0,s.jsx)(R.default,{transparent:!0,visible:b,animationType:"slide",children:(0,s.jsx)(l.default,{style:ye.modalContainer,children:(0,s.jsxs)(l.default,{style:ye.modalContent,children:[(0,s.jsx)(r.default,{style:ye.modalText,children:"Payment Successful!"}),(0,s.jsxs)(r.default,{children:["Payment Method: ",f]}),(0,s.jsxs)(r.default,{children:["Transaction ID: ",C]}),(0,s.jsxs)(r.default,{children:["Total Amount: \u20b9",a]}),(0,s.jsx)(m.default,{mode:"contained",onPress:async()=>{if(!w)return void ge.default.alert("Error","User not authenticated.");const e={user_id:w,transaction_id:C,order_date:(new Date).toISOString().split("T")[0],shipping_address:o,total_price:a,items:t.map((e=>({product_id:e.product_id,quantity:e.quantity,price:e.price})))};console.log("\ud83d\udce6 Order Data Being Sent:",e);try{let r=await fetch("http://localhost:1111/order/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),l=await r.json();console.log("\u2705 Order Response:",l),l.success?(ge.default.alert("Order Placed!","Your order has been successfully placed."),console.log("\ud83c\udf89 Order placed successfully:",l),n.navigate("PaymentSuccess",{cartItems:t,totalPrice:a,shippingAddress:o,paymentMethod:f,transaction_id:C})):(ge.default.alert("Order Failed",l.message||"Please try again."),console.error("\u274c Order Failed:",l))}catch(r){console.error("\ud83d\udea8 API Error:",r),ge.default.alert("Server Error","Could not place order.")}finally{S(!1)}},children:"Confirm Order"}),(0,s.jsx)(m.default,{onPress:()=>S(!1),children:"Cancel"})]})})})]})}const ye=o.default.create({container:{flex:1,padding:20,backgroundColor:"white"},title:{fontSize:24,fontWeight:"bold",marginBottom:10},item:{fontSize:18,marginBottom:5},emptyCart:{fontSize:16,color:"gray",textAlign:"center",marginTop:20},total:{fontSize:20,fontWeight:"bold",marginTop:10},input:{borderWidth:1,padding:10,marginVertical:10,borderRadius:5},button:{marginTop:10,backgroundColor:"green"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,width:"80%",alignItems:"center"},modalText:{fontSize:18,marginBottom:20}});function xe(){const e=(0,E.useRoute)(),t=(0,E.useNavigation)(),{item:a}=e.params,{addToCart:n}=q(),[o,i]=(0,u.useState)(null);(0,u.useEffect)((()=>{(async()=>{try{const e=await y.default.getItem("authToken");if(e){const t=JSON.parse(atob(e.split(".")[1]));console.log("Decoded Token:",t),i(t.id)}}catch(e){console.error("\ud83d\udea8 Error fetching user ID:",e)}})()}),[]);return(0,s.jsxs)(l.default,{style:pe.container,children:[(0,s.jsxs)(I.default,{style:pe.card,children:[(0,s.jsx)(l.default,{style:pe.imageContainer,children:(0,s.jsx)(f.default,{source:{uri:a.image_url},style:pe.image})}),(0,s.jsxs)(I.default.Content,{children:[(0,s.jsx)(r.default,{style:pe.title,children:a.product_id}),(0,s.jsx)(r.default,{style:pe.title,children:a.product_name}),(0,s.jsxs)(r.default,{style:pe.price,children:["$",a.price]}),(0,s.jsx)(r.default,{style:pe.description,children:a.description})]})]}),(0,s.jsxs)(l.default,{style:pe.buttonContainer,children:[(0,s.jsx)(m.default,{mode:"contained",onPress:()=>{n(a),console.log(`${a.product_name} added to cart`)},style:pe.button,labelStyle:pe.buttonText,children:"Add to Cart"}),(0,s.jsx)(m.default,{mode:"outlined",onPress:async()=>{console.log(`${a.product_id} added to ${o}`);try{a.product_id;const e=await fetch("http://localhost:1111/wish/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(o),product_id:parseInt(a.product_id)})}),n=await e.json();console.log("Response Data:",n),"success"===n.status?(console.log(`${a.product_name} added to wishlist successfully.`),t.navigate("wishlist")):console.error("Error adding item to wishlist:",n.data)}catch(e){console.error("Error adding item to wishlist:",e)}},style:pe.button,labelStyle:pe.buttonText,children:"Add to Wishlist"}),(0,s.jsx)(m.default,{mode:"text",onPress:()=>t.goBack(),style:pe.backButton,labelStyle:pe.backText,children:"Back"})]})]})}const pe=o.default.create({container:{flex:1,backgroundColor:"#f8f9fa",padding:20,justifyContent:"center",alignItems:"center"},card:{width:"100%",borderRadius:12,overflow:"hidden",elevation:4,backgroundColor:"#ffffff",paddingBottom:10},imageContainer:{alignItems:"center",justifyContent:"center",paddingVertical:10},image:{height:350,width:250,resizeMode:"cover",borderRadius:10},title:{fontSize:22,fontWeight:"bold",marginTop:10,textAlign:"center"},price:{fontSize:20,color:"#2ecc71",fontWeight:"bold",textAlign:"center",marginVertical:5},description:{fontSize:16,textAlign:"center",color:"#555",marginVertical:10},buttonContainer:{marginTop:20,width:"100%",alignItems:"center"},button:{width:"90%",borderRadius:8,marginVertical:10,paddingVertical:5},buttonText:{fontSize:16},backButton:{marginTop:10},backText:{fontSize:16,color:"#3498db"}});function je({route:e}){const t=(0,E.useNavigation)(),{cartItems:a,totalPrice:n,shippingAddress:o,paymentMethod:i,transaction_id:d}=e.params,[c,f]=(0,u.useState)(null);return(0,u.useEffect)((()=>{(async()=>{try{const e=await y.default.getItem("authToken");if(e){const t=JSON.parse(atob(e.split(".")[1]));f(t.user_id)}}catch(e){console.error("\ud83d\udea8 Error fetching user ID:",e),ge.default.alert("Error","Failed to get user details.")}})()}),[]),(0,u.useEffect)((()=>{}),[c]),(0,s.jsxs)(l.default,{style:be.container,children:[(0,s.jsx)(r.default,{style:be.title,children:"Payment Successful!"}),(0,s.jsx)(r.default,{style:be.subtitle,children:"Your order has been placed successfully."}),(0,s.jsxs)(r.default,{style:be.detail,children:["Total Price: \u20b9",n]}),(0,s.jsxs)(r.default,{style:be.detail,children:["Payment Method: ",i]}),(0,s.jsxs)(r.default,{style:be.detail,children:["Shipping Address: ",o]}),(0,s.jsx)(r.default,{style:be.detail,children:"Order Items:"}),a.map(((e,t)=>(0,s.jsxs)(r.default,{style:be.item,children:[e.product_name," - \u20b9",e.price," x ",e.quantity]},t))),(0,s.jsx)(m.default,{mode:"contained",onPress:()=>t.navigate("Home"),style:be.button,children:"Go to Home"})]})}const be=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"white",padding:20},title:{fontSize:24,fontWeight:"bold",color:"green",marginBottom:10},subtitle:{fontSize:18,marginBottom:10},detail:{fontSize:16,marginBottom:5},item:{fontSize:16,marginBottom:5},button:{marginTop:20,backgroundColor:"green"}}),Se=(0,d.createNativeStackNavigator)();(0,n.default)((function(){return(0,s.jsx)(c.SafeAreaProvider,{children:(0,s.jsx)(W,{children:(0,s.jsx)(i.NavigationContainer,{children:(0,s.jsxs)(Se.Navigator,{initialRouteName:"Login",children:[(0,s.jsx)(Se.Screen,{name:"Login",component:x}),(0,s.jsx)(Se.Screen,{name:"SignUp",component:b}),(0,s.jsx)(Se.Screen,{name:"wishlist",component:de}),(0,s.jsx)(Se.Screen,{name:"Seller",component:K}),(0,s.jsx)(Se.Screen,{name:"Odetail",component:ue}),(0,s.jsx)(Se.Screen,{name:"addItem",component:ne}),(0,s.jsx)(Se.Screen,{name:"item",component:xe}),(0,s.jsx)(Se.Screen,{name:"POrderDetails",component:me}),(0,s.jsx)(Se.Screen,{name:"PaymentSuccess",component:je}),(0,s.jsx)(Se.Screen,{name:"Home",component:Z,options:{headerShown:!0}}),(0,s.jsx)(Se.Screen,{name:"Selldashb",component:ie,options:{headerShown:!0}}),(0,s.jsx)(Se.Screen,{name:"SellDashboard",component:le}),(0,s.jsx)(Se.Screen,{name:"additem",component:ie,options:{headerShown:!0}})]})})})})}))},2670:(e,t,a)=>{e.exports=a.p+"static/media/res.03fac254248968faaaad.png"}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,(()=>{var e=[];a.O=(t,n,o,r)=>{if(!n){var l=1/0;for(c=0;c<e.length;c++){for(var[n,o,r]=e[c],s=!0,i=0;i<n.length;i++)(!1&r||l>=r)&&Object.keys(a.O).every((e=>a.O[e](n[i])))?n.splice(i--,1):(s=!1,r<l&&(l=r));if(s){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="/",(()=>{var e={792:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[l,s,i]=n,d=0;if(l.some((t=>0!==e[t]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(i)var c=i(a)}for(t&&t(n);d<l.length;d++)r=l[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=a.O(void 0,[559],(()=>a(2248)));n=a.O(n)})();
//# sourceMappingURL=main.c15bdab8.js.map